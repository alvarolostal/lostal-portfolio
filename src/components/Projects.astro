---
import { Picture } from 'astro:assets';
import vivenzaImg from '../assets/projects/vivenza-preview.png';
import creativeHandsImg from '../assets/projects/creative-hands-preview.png';
---

<section class="projects-section section-alt" id="projects">
  <div class="wrapper">
    <div class="section-header fade-in">
      <div class="section-label">Proyectos</div>
      <h2 class="section-title">Mi Trabajo</h2>
      <p class="section-description">
        Estos proyectos web reflejan mi enfoque en el diseño minimalista, una UX
        cuidada y buenas prácticas de desarrollo.
      </p>
    </div>
  </div>

  <div class="projects-section__content">
    <div class="projects-carousel">
      <div class="projects-carousel__nav slider-nav">
        <button
          class="slider-nav__item slider-nav__item_prev"
          aria-label="Proyecto anterior"
          type="button"
        >
          <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </button>
        <button
          class="slider-nav__item slider-nav__item_next"
          aria-label="Siguiente proyecto"
          type="button"
        >
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>
      </div>

      <div class="projects-carousel__slider swiper">
        <div class="projects-carousel__wrapper swiper-wrapper">
          <div class="projects-carousel__slide swiper-slide">
            <div class="carousel-item">
              <div class="carousel-item__image">
                <Picture
                  src={vivenzaImg}
                  alt="Rediseño Vivenza Expo"
                  widths={[500, 800, 1200]}
                  sizes="(max-width: 640px) 85vw, (max-width: 1024px) 50vw, (max-width: 1440px) 40vw, 500px"
                  formats={['avif', 'webp']}
                  loading="lazy"
                  quality={92}
                  class="project-carousel-image"
                />
              </div>
              <div class="carousel-item__content">
                <div class="carousel-item__header">
                  <div class="carousel-item__header-inner">
                    <div class="carousel-item__price">
                      <span class="tag">
                        <img
                          src="/assets/tech-icons/nextjs.svg"
                          alt="Next.js"
                          class="tech-mini-icon"
                          loading="lazy"
                        />
                        Next.js
                      </span>
                    </div>
                    <div class="carousel-item__author">
                      <a
                        class="carousel-item__link"
                        href="https://vivenza.netlify.app/"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Ver proyecto
                      </a>
                    </div>
                  </div>
                </div>

                <div class="carousel-item__info">
                  <h2 class="carousel-item__title">Rediseño Vivenza Expo</h2>
                  <div class="carousel-item__text">
                    Rediseño completo de la landing page de Vivenza Expo,
                    aplicando principios de diseño moderno.
                  </div>
                </div>

                <div class="carousel-item__footer">
                  <button
                    class="carousel-item__btn"
                    type="button"
                    aria-label="Ver más sobre Rediseño Vivenza Expo"
                  >
                    <span class="carousel-item__btn-text">Ver más</span>
                    <i class="fas fa-arrow-right" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="projects-carousel__slide swiper-slide">
            <div class="carousel-item">
              <div class="carousel-item__image">
                <Picture
                  src={creativeHandsImg}
                  alt="Creative Hands"
                  widths={[500, 800, 1200]}
                  sizes="(max-width: 640px) 85vw, (max-width: 1024px) 50vw, (max-width: 1440px) 40vw, 500px"
                  formats={['avif', 'webp']}
                  loading="lazy"
                  quality={92}
                  class="project-carousel-image"
                />
              </div>

              <div class="carousel-item__content">
                <div class="carousel-item__header">
                  <div class="carousel-item__header-inner">
                    <div class="carousel-item__price">
                      <span class="tag">
                        <img
                          src="/assets/tech-icons/react.svg"
                          alt="React"
                          class="tech-mini-icon"
                          loading="lazy"
                        />
                        React
                      </span>
                    </div>
                    <div class="carousel-item__author">
                      <a
                        class="carousel-item__link"
                        href="https://creative-hands-cjzg.onrender.com/"
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        Ver proyecto
                      </a>
                    </div>
                  </div>
                </div>

                <div class="carousel-item__info">
                  <h2 class="carousel-item__title">Creative Hands</h2>
                  <div class="carousel-item__text">
                    Plataforma e-commerce full-stack con autenticación JWT y
                    chat en tiempo real mediante Socket.io.
                  </div>
                </div>

                <div class="carousel-item__footer">
                  <button
                    class="carousel-item__btn"
                    type="button"
                    aria-label="Ver más sobre Creative Hands"
                  >
                    <span class="carousel-item__btn-text">Ver más</span>
                    <i class="fas fa-arrow-right" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline src="/assets/swiper/swiper-bundle.min.js"></script>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.querySelector('.projects-carousel');
    if (!carousel) return;

    const slider = carousel.querySelector('.swiper');
    const prevEl = carousel.querySelector('.slider-nav__item_prev');
    const nextEl = carousel.querySelector('.slider-nav__item_next');

    new Swiper(slider, {
      slidesPerView: 1.3,
      spaceBetween: 24,
      speed: 500,
      centeredSlides: true,
      initialSlide: 0,
      loop: false,
      grabCursor: true,
      navigation: {
        nextEl,
        prevEl,
        disabledClass: 'disabled',
      },
      breakpoints: {
        // Móvil pequeño
        375: {
          slidesPerView: 1.4,
          spaceBetween: 20,
        },
        // Móvil grande
        480: {
          slidesPerView: 1.5,
          spaceBetween: 24,
        },
        // Tablet pequeña
        640: {
          slidesPerView: 2.0,
          spaceBetween: 28,
        },
        // Tablet
        768: {
          slidesPerView: 2.2,
          spaceBetween: 32,
        },
        // Desktop pequeño
        1024: {
          slidesPerView: 2.6,
          spaceBetween: 36,
        },
        // Desktop medio
        1280: {
          slidesPerView: 2.8,
          spaceBetween: 40,
        },
        // Desktop grande
        1440: {
          slidesPerView: 3.0,
          spaceBetween: 44,
        },
        // Desktop muy grande
        1920: {
          slidesPerView: 3.2,
          spaceBetween: 48,
        },
        // Pantallas ultra anchas
        2400: {
          slidesPerView: 3.4,
          spaceBetween: 52,
        },
      },
    });
  });
</script>
